(function(e){function t(t){for(var a,r,i=t[0],c=t[1],l=t[2],u=0,h=[];u<i.length;u++)r=i[u],Object.prototype.hasOwnProperty.call(s,r)&&s[r]&&h.push(s[r][0]),s[r]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);d&&d(t);while(h.length)h.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],a=!0,i=1;i<n.length;i++){var c=n[i];0!==s[c]&&(a=!1)}a&&(o.splice(t--,1),e=r(r.s=n[0]))}return e}var a={},s={app:0},o=[];function r(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=a,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var d=c;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"02a3":function(e,t,n){},"0772":function(e,t,n){"use strict";var a=n("1174"),s=n.n(a);s.a},1030:function(e,t,n){},1174:function(e,t,n){},"12c1":function(e,t,n){},"17b8":function(e,t,n){},1912:function(e,t,n){},"50cb":function(e,t,n){"use strict";var a=n("70e6"),s=n.n(a);s.a},"53e3":function(e,t,n){"use strict";var a=n("1030"),s=n.n(a);s.a},"56c4":function(e,t,n){"use strict";var a=n("fc01"),s=n.n(a);s.a},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),s=n("8c4f"),o=(n("99af"),n("a434"),n("2f62"));function r(e,t){window.sessionStorage.setItem(e,JSON.stringify(t))}function i(e){return JSON.parse(window.sessionStorage.getItem(e))}a["default"].use(o["a"]);var c=new o["a"].Store({state:{serverList:[],currentSelectIndex:-1,vendorList:i("_vendorList")||[],vendorResource:i("_vendorResource")||{},selectedArr:i("_selectedArr")||[],cacheCodeObj:i("_cacheCodeObj")||{},cacheTokenObj:i("_cacheTokenObj")||{},useSystemAuth:!1!==i("useSystemAuth"),cacheThirdObj:i("_cacheThirdObj")||{}},mutations:{setServerList:function(e,t){e.serverList=t},upDateServerList:function(e,t){e.serverList.splice(e.currentSelectIndex,1,t)},deleteCurrentItem:function(e,t){t=t||e.currentSelectIndex,e.serverList.splice(t,1)},setCurrentSelectIndex:function(e,t){e.currentSelectIndex=t},setVendorList:function(e,t){e.vendorList=t,r("_vendorList",t)},addVendorResource:function(e,t){var n=t.parentId,a=t.resource;e.vendorResource[n]=(e.vendorResource[n]||[]).concat(a),r("_vendorResource",e.vendorResource)},setSelectedArr:function(e,t){e.selectedArr=t,r("_selectedArr",t)},setCacheCodeObj:function(e,t){e.cacheCodeObj=t,r("_cacheCodeObj",t)},setCacheTokenObj:function(e,t){e.cacheTokenObj=t,r("_cacheTokenObj",t)},changeSysAuth:function(e){e.useSystemAuth=!e.useSystemAuth,r("useSystemAuth",e.useSystemAuth)},setCacheThirdObj:function(e,t){e.cacheThirdObj=t,r("_cacheThirdObj",t)}}}),l=c,d=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Container",{staticClass:"main-container"},[n("Aside",{staticClass:"left-side",attrs:{width:"200px"}},[n("router-view",{attrs:{name:"leftMenu"}})],1),n("Main",{staticClass:"right-side"},[n("router-view")],1)],1)},u=[],h=(n("a769"),n("450d"),n("5cc3")),p=n.n(h),f=(n("de31"),n("c69e")),m=n.n(f),v=(n("adec"),n("3d2d")),y=n.n(v),T={name:"MainContainer",components:{Container:y.a,Main:m.a,Aside:p.a}},C=T,b=(n("53e3"),n("2877")),k=Object(b["a"])(C,d,u,!1,null,"113307aa",null),I=k.exports,_=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Menu",{staticClass:"menu-wrapper",attrs:{"default-active":e.activityMenu},on:{select:e.handleSelect}},[n("MenuItem",{attrs:{index:"playGround"}},[e._v("选择资源服务商")]),n("MenuItem",{attrs:{index:"getToken"}},[e._v("获取授权token")]),n("MenuItem",{attrs:{index:"getApi"}},[e._v("获取资源服务")])],1)},g=[],x=(n("b0c0"),n("8bd8"),n("4cb2")),w=n.n(x),P=(n("4ca3"),n("443e")),O=n.n(P),S={name:"LeftMenu",components:{Menu:O.a,MenuItem:w.a},data:function(){return{activityMenu:"playGround"}},created:function(){this.initMenu()},methods:{initMenu:function(){var e=this.$route.name;this.activityMenu="default"===e||"playGround"===e||"index"===e?"playGround":e},handleSelect:function(e){e!==this.activityMenu&&(this.activityMenu=e,this.$router.push({name:e}))}}},j=S,q=(n("56c4"),Object(b["a"])(j,_,g,!1,null,"398affb3",null)),A=q.exports,E=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container-wrapper"},[e.$store.state.useSystemAuth?n("h3",{staticClass:"h3-title"},[e._v("选择资源服务商 "),n("span",{staticClass:"click-btn",on:{click:e.changeSysAuth}},[e._v("第三方授权")])]):n("h3",{staticClass:"h3-title"},[e._v("第三方授权 "),n("span",{staticClass:"click-btn",on:{click:e.changeSysAuth}},[e._v("选择资源服务商")])]),e.$store.state.useSystemAuth?n("DefaultPanel"):n("ThirdPanel")],1)},B=[],$=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.options.length>0?n("CascaderPanel",{staticClass:"cas-panel",attrs:{options:e.options,props:e.props},on:{"expand-change":e.handleExpandChange},model:{value:e.selectedArr,callback:function(t){e.selectedArr=t},expression:"selectedArr"}}):e._e(),n("div",{staticClass:"auth-area"},[n("Button",{attrs:{type:"primary",size:"small",disabled:e.disableAuthorize},on:{click:e.doAuthorize}},[e._v("授权登录")]),e.requestInfo?n("div",{staticClass:"info-area"},[n("Card",{attrs:{shadow:"never"}},[n("div",{attrs:{slot:"header"},slot:"header"},[e._v("请求信息")]),n("pre",{staticClass:"pre-item"},[e._v(e._s(e.requestInfo))])])],1):e._e(),e.responseInfo?n("div",{staticClass:"info-area"},[n("Card",{attrs:{shadow:"never"}},[n("div",{attrs:{slot:"header"},slot:"header"},[e._v("响应信息")]),n("pre",{staticClass:"pre-item"},[e._v(e._s(e.responseInfo))])])],1):e._e()],1)],1)},R=[],D=(n("d81d"),n("b8e0"),n("a4c4")),U=n.n(D),N=(n("1951"),n("eedf")),L=n.n(N),F=(n("bc1c"),n("4726")),z=n.n(F),G=(n("c975"),n("a15b"),n("d3b7"),n("4d63"),n("ac1f"),n("25f0"),n("5319"),n("6d93")),M=["GET","POST","PUT","DELETE","PATCH"];function J(e,t){if(e&&"[object Object]"===Object.prototype.toString.call(e)){var n=e.url||"";if(!n)return t(new Error("request url error"),null),!1;var a=(e.method||"GET").toUpperCase();if(M.indexOf(a)<0)return t(new Error("request method error"),null),!1;if(e.urlParams)for(var s in e.urlParams){var o=new RegExp("\\{\\s?".concat(s,"\\s?\\}"));n=n.replace(o,e.urlParams[s])}if("GET"===a&&(e.queryParams=e.queryParams||{},e.queryParams._timeTag=(new Date).getTime()),e.queryParams){var r=[];for(var i in e.queryParams)r.push("".concat(i,"=").concat(e.queryParams[i]));n+="".concat(n.indexOf("?")>=0?"&":"?").concat(encodeURI(r.join("&")))}var c={};c.method=a,"POST"!==a&&"PUT"!==a&&"PATCH"!==a||!e.bodyParams||(c.body=e.bodyParams,e.headers=e.headers||{},!e.headers["Content-Type"]&&(e.headers["Content-Type"]="application/json")),e.headers&&(c.headers=e.headers),Object(G["a"])(n,c).then((function(e){t(null,e)})).catch((function(e){t(e,null)}))}else t(new Error("error request config"),null)}var H=J,V=window._URLConfig||{},K={AuthUrl:V.AuthUrl,Scope:V.Scope,RedirectUrl:V.RedirectUrl,Client:V.Client,Secret:V.Secret,ResponseType:V.ResponseType,GetTokenUrl:V.GetTokenUrl,RefreshTokenUrl:V.RefreshTokenUrl,BaseUrl:window.location.href.indexOf("localhost")>=0?"/dev-api":V.BaseUrl,proxyGetTpken:{path:"/proxy/getToken",method:"POST"},proxyRefreshToken:{path:"/proxy/refreshToken",method:"POST"},proxyGetRes:{path:"/proxy/getRes",method:"POST"},proxyFormData:{path:"/proxy/getResByFormData",method:"POST"}},Q=K,W={name:"DefaultPanel",components:{CascaderPanel:z.a,Button:L.a,Card:U.a},data:function(){var e=this;return{selectedArr:[],disableAuthorize:!0,authorizationCode:"",requestInfo:"",responseInfo:"",options:[],props:{lazy:!0,value:"_id",label:"_name",lazyLoad:function(t,n){var a=t.level,s=t.value,o=[];if(s){var r=e.$store.state.vendorResource||{};o=r[s]||[],o.length>0?n():e.getServiceList(s,(function(t){"success"===t.status&&(o=(t.data||[]).map((function(e){return e._id=e.id,e._name=e.resName,e.leaf=a>=1,e}))),e.$store.commit("addVendorResource",{parentId:s,resource:o}),n(o)}))}else n(o)}}}},watch:{selectedArr:function(e){e&&e.length>=2?this.disableAuthorize=!1:this.disableAuthorize=!0}},created:function(){var e=this;this.checkHasCode();var t=this.$store.state.vendorList||[];if(t.length>0){this.options=this.generateVendorList(t);var n=this.$store.state.selectedArr||[];this.selectedArr=n}else this.getVendorList((function(t){if("success"===t.status){var n=(t.data||[]).map((function(e){return e._id=e.id,e._name=e.name,e}));e.options=n,e.$store.commit("setVendorList",e.options);var a=e.$store.state.selectedArr||[];e.selectedArr=a}}))},methods:{checkHasCode:function(){var e=this.$route.query||{},t=this.$store.state.cacheCodeObj||{};if(e.code){this.authorizationCode=e.code;var n=t.url;t.code=e.code,this.$store.commit("setCacheCodeObj",t),this.requestInfo="HTTP/1.1 302 Found\nLocation: ".concat(n),this.responseInfo="Get /?code=".concat(e.code)}else if(!e.code&&t.code){this.authorizationCode=t.code;var a=t.url;this.requestInfo="HTTP/1.1 302 Found\nLocation: ".concat(a),this.responseInfo="Get /?code=".concat(t.code)}},getVendorList:function(e){var t={url:"".concat(Q.BaseUrl,"/front/api/spList"),method:"get"};H(t,(function(t,n){t?console.log(t.message):n.json().then((function(t){e(t)}))}))},getServiceList:function(e,t){var n={url:"".concat(Q.BaseUrl,"/front/api/serviceList/").concat(e),method:"get"};H(n,(function(e,n){e?console.log(e.message):n.json().then((function(e){t(e)}))}))},generateVendorList:function(e){var t=this.$store.state.vendorResource||{};return e.map((function(e){var n=e.id;return t[n]&&(e.children=t[n]||[]),e}))},handleExpandChange:function(e){this.selectedArr=e},doAuthorize:function(){this.$store.commit("setSelectedArr",this.selectedArr);var e="".concat(Q.RedirectUrl),t="".concat(Q.Scope),n="".concat(Q.ResponseType),a="".concat(Q.Client),s="".concat(Q.AuthUrl,"/?response_type=").concat(n,"&client_id=").concat(a,"&redirect_uri=").concat(e,"&scope=").concat(t),o=this.$store.state.cacheCodeObj||{};o.url=s,this.$store.commit("setCacheCodeObj",o),this.$nextTick((function(){window.location.href=s}))}}},X=W,Y=(n("50cb"),Object(b["a"])(X,$,R,!1,null,"61689bc4",null)),Z=Y.exports,ee=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"third-panel"},[n("Alert",{attrs:{title:"认证服务器需要信任 "+e.redirectUri+" 为授权认证后的回调地址",type:"info",effect:"dark"}}),n("div",{staticClass:"auth-wrapper"},[n("div",{staticClass:"auth-item"},[n("span",{staticClass:"input-label"},[e._v("授权地址:")]),n("Input",{staticClass:"input-item",attrs:{placeholder:"授权服务器地址(http/s完整路径)"},model:{value:e.authorizationEndpoint,callback:function(t){e.authorizationEndpoint="string"===typeof t?t.trim():t},expression:"authorizationEndpoint"}})],1),n("div",{staticClass:"auth-item"},[n("span",{staticClass:"input-label"},[e._v("Token获取地址:")]),n("Input",{staticClass:"input-item",attrs:{placeholder:"Token获取地址(http/s完整路径)"},model:{value:e.tokenEndpoint,callback:function(t){e.tokenEndpoint="string"===typeof t?t.trim():t},expression:"tokenEndpoint"}})],1),n("div",{staticClass:"auth-item"},[n("span",{staticClass:"input-label"},[e._v("刷新Token地址:")]),n("Input",{staticClass:"input-item",attrs:{placeholder:"刷新Token地址(http/s完整路径, 可选)"},model:{value:e.refreshTokenEndpoint,callback:function(t){e.refreshTokenEndpoint="string"===typeof t?t.trim():t},expression:"refreshTokenEndpoint"}})],1),n("div",{staticClass:"auth-item"},[n("span",{staticClass:"input-label"},[e._v("权限范围:")]),n("Input",{staticClass:"input-item",attrs:{placeholder:"权限范围(可选)"},model:{value:e.scope,callback:function(t){e.scope="string"===typeof t?t.trim():t},expression:"scope"}})],1),n("div",{staticClass:"auth-item"},[n("span",{staticClass:"input-label"},[e._v("ClientId:")]),n("Input",{staticClass:"input-item",attrs:{placeholder:"客户端Id"},model:{value:e.clientId,callback:function(t){e.clientId="string"===typeof t?t.trim():t},expression:"clientId"}})],1),n("div",{staticClass:"auth-item"},[n("span",{staticClass:"input-label"},[e._v("ClientSecret:")]),n("Input",{staticClass:"input-item",attrs:{placeholder:"客户端秘钥"},model:{value:e.clientSecret,callback:function(t){e.clientSecret="string"===typeof t?t.trim():t},expression:"clientSecret"}})],1),n("Button",{staticClass:"auth-btn",attrs:{type:"primary",size:"small",disabled:e.disableAuthorize},on:{click:e.doAuthorize}},[e._v("授权登录")])],1),e.requestInfo?n("div",{staticClass:"info-area"},[n("Card",{attrs:{shadow:"never"}},[n("div",{attrs:{slot:"header"},slot:"header"},[e._v("请求信息")]),n("pre",{staticClass:"pre-item"},[e._v(e._s(e.requestInfo))])])],1):e._e(),e.responseInfo?n("div",{staticClass:"info-area"},[n("Card",{attrs:{shadow:"never"}},[n("div",{attrs:{slot:"header"},slot:"header"},[e._v("响应信息")]),n("pre",{staticClass:"pre-item"},[e._v(e._s(e.responseInfo))])])],1):e._e()],1)},te=[],ne=(n("915d"),n("e04d")),ae=n.n(ne),se=(n("10cb"),n("f3ad")),oe=n.n(se),re={name:"ThirdPanel",components:{Input:oe.a,Button:L.a,Alert:ae.a,Card:U.a},data:function(){return{authorizationEndpoint:"",tokenEndpoint:"",refreshTokenEndpoint:"",scope:"",clientId:"",clientSecret:"",code:"",requestInfo:"",responseInfo:"",redirectUri:window.location.href.replace(/\?.*/g,"")}},computed:{disableAuthorize:function(){return!(this.authorizationEndpoint&&this.tokenEndpoint&&this.clientId&&this.clientSecret)}},created:function(){this.checkHasCode()},methods:{checkHasCode:function(){var e=this.$route.query||{},t=this.$store.state.cacheThirdObj||{};if(e.code){this.code=e.code;var n=t.url;t.code=e.code,this.$store.commit("setCacheThirdObj",t),this.requestInfo="HTTP/1.1 302 Found\nLocation: ".concat(n),this.responseInfo="Get /?code=".concat(e.code)}else if(!e.code&&t.code){this.code=t.code;var a=t.url;this.requestInfo="HTTP/1.1 302 Found\nLocation: ".concat(a),this.responseInfo="Get /?code=".concat(t.code)}this.authorizationEndpoint=t.authorizationEndpoint||"",this.tokenEndpoint=t.tokenEndpoint||"",this.refreshTokenEndpoint=t.refreshTokenEndpoint||"",this.scope=t.scope||"",this.clientId=t.clientId||"",this.clientSecret=t.clientSecret||""},doAuthorize:function(){if(0!==this.authorizationEndpoint.indexOf("http"))return this.$message({showClose:!0,message:"请输入正确的授权地址",type:"error"}),!1;if(0!==this.tokenEndpoint.indexOf("http"))return this.$message({showClose:!0,message:"请输入正确的token获取地址",type:"error"}),!1;var e={};e.authorizationEndpoint=this.authorizationEndpoint,e.tokenEndpoint=this.tokenEndpoint,e.refreshTokenEndpoint=this.refreshTokenEndpoint,e.scope=this.scope,e.clientId=this.clientId,e.clientSecret=this.clientSecret;var t=this.redirectUri,n="code",a="".concat(this.authorizationEndpoint,"/?response_type=").concat(n,"&client_id=").concat(this.clientId,"&redirect_uri=").concat(t,"&scope=").concat(this.scope);e.url=a,this.$store.commit("setCacheThirdObj",e),this.$nextTick((function(){window.location.href=a}))}}},ie=re,ce=(n("0772"),Object(b["a"])(ie,ee,te,!1,null,"310a103f",null)),le=ce.exports,de={name:"PlayGroundPanel",components:{DefaultPanel:Z,ThirdPanel:le},methods:{changeSysAuth:function(){this.$store.commit("changeSysAuth")}}},ue=de,he=(n("f57c"),Object(b["a"])(ue,E,B,!1,null,"3bb29e92",null)),pe=he.exports,fe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.$store.state.useSystemAuth?n("DefaultGetToken"):n("ThirdGetToken")],1)},me=[],ve=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container-wrapper"},[e.hasNoVendor?n("Alert",{attrs:{title:"请先选择资源服务商并获取授权",type:"info",closable:!1,"show-icon":""}}):e._e(),n("div",{staticClass:"token-wrapper"},[n("div",{staticClass:"token-item"},[n("span",{staticClass:"input-label"},[e._v("授权Code:")]),n("Input",{staticClass:"input-item",attrs:{placeholder:"请输入授权code"},model:{value:e.authorizationCode,callback:function(t){e.authorizationCode=t},expression:"authorizationCode"}}),n("Button",{attrs:{type:"primary",disabled:!e.authorizationCode},on:{click:e.getToken}},[e._v("获取token")])],1),n("div",{staticClass:"token-item"},[n("span",{staticClass:"input-label"},[e._v("RefreshToken:")]),n("Input",{staticClass:"input-item",attrs:{placeholder:"RefreshToken"},model:{value:e.refreshToken,callback:function(t){e.refreshToken=t},expression:"refreshToken"}}),n("Button",{attrs:{type:"primary",disabled:!e.refreshToken},on:{click:e.doRefreshToken}},[e._v("刷新Token")])],1),n("div",{staticClass:"token-item"},[n("span",{staticClass:"input-label"},[e._v("AccessToken:")]),n("Input",{staticClass:"input-item",attrs:{placeholder:"AccessToken"},model:{value:e.accessToken,callback:function(t){e.accessToken=t},expression:"accessToken"}}),n("Input",{staticClass:"expires-item",attrs:{disabled:""},model:{value:e.expiresIn,callback:function(t){e.expiresIn=t},expression:"expiresIn"}},[n("template",{slot:"append"},[e._v(e._s(e.expiresIn>0?"秒后过期":"已过期"))])],2)],1)]),e.requestInfo?n("div",{staticClass:"info-area"},[n("Card",{attrs:{shadow:"never"}},[n("div",{staticClass:"header-info",attrs:{slot:"header"},slot:"header"},[e._v("请求信息")]),n("pre",{staticClass:"pre-item"},[e._v(e._s(e.requestInfo))])])],1):e._e(),e.responseInfo?n("div",{staticClass:"info-area"},[n("Card",{attrs:{shadow:"never"}},[n("div",{staticClass:"header-info",attrs:{slot:"header"},slot:"header"},[e._v("响应信息")]),n("pre",{staticClass:"pre-item"},[e._v(e._s(e.responseInfo))])])],1):e._e()],1)},ye=[],Te=(n("0fb7"),n("f529")),Ce=n.n(Te),be={name:"DefaultGetToken",components:{Alert:ae.a,Input:oe.a,Button:L.a,Card:U.a},data:function(){return{hasNoVendor:!0,authorizationCode:"",refreshToken:"",accessToken:"",expiresIn:0,requestInfo:"",responseInfo:"",count:!1}},created:function(){this.initData()},beforeDestroy:function(){this.stopCountDown()},methods:{initData:function(){var e=this.$store.state.cacheCodeObj||{},t=e.code;t&&(this.hasNoVendor=!1,this.authorizationCode=t);var n=this.$store.state.cacheTokenObj||{};this.accessToken=n.accessToken,this.refreshToken=n.refreshToken,this.requestInfo=n.requestInfo,this.responseInfo=n.responseInfo;var a=n.expiresIn||0,s=n._acceptTime||0;s&&(a-=Math.floor(((new Date).getTime()-s)/1e3)),this.expiresIn=a>0?a:0,this.expiresIn>0&&this.countDown()},countDown:function(){var e=this;this.count&&clearInterval(this.count),this.count=setInterval((function(){if(e.expiresIn-=1,e.expiresIn>0){var t=Object.assign(e.$store.state.cacheTokenObj||{});t.expiresIn=e.expiresIn,t._acceptTime=(new Date).getTime(),e.$store.commit("setCacheTokenObj",t)}else{var n=Object.assign(e.$store.state.cacheTokenObj||{});n.expiresIn=0,e.$store.commit("setCacheTokenObj",n),e.stopCountDown()}}),1e3)},stopCountDown:function(){this.count&&clearInterval(this.count)},getToken:function(){var e={url:"".concat(Q.GetTokenUrl),method:"get",queryParams:{code:this.authorizationCode}};this.requestToken(e)},doRefreshToken:function(){var e={url:"".concat(Q.RefreshTokenUrl),method:"get",queryParams:{refreshToken:this.refreshToken}};this.requestToken(e)},requestToken:function(e){var t=this;H(e,(function(e,n){e?Ce()({message:e.message,type:"error"}):n.json().then((function(e){var n={},a="",s="";for(var o in e)if("resultData"===o)if(s=e[o],s.indexOf("error")>=0)n={};else try{var r=JSON.parse(e[o]);t.accessToken=r.accessToken,t.refreshToken=r.refreshToken,t.expiresIn=r.expiresIn,r._acceptTime=(new Date).getTime(),n=r,t.countDown()}catch(i){n={}}else a+=a?"\n"+"".concat(o,": ").concat(e[o]):"".concat(o,": ").concat(e[o]);t.requestInfo=a,t.responseInfo=s,n.responseInfo=Object.assign(t.responseInfo),n.requestInfo=Object.assign(t.requestInfo),t.$store.commit("setCacheTokenObj",n)}))}))}}},ke=be,Ie=(n("b422"),Object(b["a"])(ke,ve,ye,!1,null,"9a6ff252",null)),_e=Ie.exports,ge=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container-wrapper"},[e.hasNoVendor?n("Alert",{attrs:{title:"请先获取第三方授权",type:"info",closable:!1,"show-icon":""}}):e._e(),n("div",{staticClass:"token-wrapper"},[n("div",{staticClass:"token-item"},[n("span",{staticClass:"input-label"},[e._v("授权Code:")]),n("Input",{staticClass:"input-item",attrs:{placeholder:"请输入授权code"},model:{value:e.authorizationCode,callback:function(t){e.authorizationCode=t},expression:"authorizationCode"}}),n("Button",{attrs:{type:"primary",disabled:!e.authorizationCode},on:{click:e.getToken}},[e._v("获取token")])],1),e.refreshTokenEndpoint?n("div",{staticClass:"token-item"},[n("span",{staticClass:"input-label"},[e._v("RefreshToken:")]),n("Input",{staticClass:"input-item",attrs:{placeholder:"RefreshToken"},model:{value:e.refreshToken,callback:function(t){e.refreshToken=t},expression:"refreshToken"}}),n("Button",{attrs:{type:"primary",disabled:!e.refreshToken},on:{click:e.doRefreshToken}},[e._v("刷新Token")])],1):e._e(),n("div",{staticClass:"token-item"},[n("span",{staticClass:"input-label"},[e._v("AccessToken:")]),n("Input",{staticClass:"input-item",attrs:{placeholder:"AccessToken"},model:{value:e.accessToken,callback:function(t){e.accessToken=t},expression:"accessToken"}}),n("Input",{staticClass:"expires-item",attrs:{disabled:""},model:{value:e.expiresIn,callback:function(t){e.expiresIn=t},expression:"expiresIn"}},[n("template",{slot:"append"},[e._v(e._s(e.expiresIn>0?"秒后过期":"已过期"))])],2)],1)]),e.requestInfo?n("div",{staticClass:"info-area"},[n("Card",{attrs:{shadow:"never"}},[n("div",{staticClass:"header-info",attrs:{slot:"header"},slot:"header"},[e._v("请求信息")]),n("pre",{staticClass:"pre-item"},[e._v(e._s(e.requestInfo))])])],1):e._e(),e.responseInfo?n("div",{staticClass:"info-area"},[n("Card",{attrs:{shadow:"never"}},[n("div",{staticClass:"header-info",attrs:{slot:"header"},slot:"header"},[e._v("响应信息")]),n("pre",{staticClass:"pre-item"},[e._v(e._s(e.responseInfo))])])],1):e._e()],1)},xe=[],we={name:"ThirdGetToken",components:{Alert:ae.a,Input:oe.a,Button:L.a,Card:U.a},data:function(){return{hasNoVendor:!0,authorizationCode:"",refreshTokenEndpoint:"",refreshToken:"",accessToken:"",expiresIn:0,requestInfo:"",responseInfo:"",count:!1}},created:function(){this.initData()},beforeDestroy:function(){this.stopCountDown()},methods:{initData:function(){var e=this.$store.state.cacheThirdObj||{},t=e.code;t&&(this.hasNoVendor=!1,this.authorizationCode=t),this.accessToken=e.accessToken||"",this.refreshToken=e.refreshToken||"",this.requestInfo=e.requestInfo||"",this.responseInfo=e.responseInfo||"",this.refreshTokenEndpoint=e.refreshTokenEndpoint||"";var n=e.expiresIn||0,a=e._acceptTime||0;a&&(n-=Math.floor(((new Date).getTime()-a)/1e3)),this.expiresIn=n>0?n:0,this.expiresIn>0&&this.countDown()},countDown:function(){var e=this;this.count&&clearInterval(this.count),this.count=setInterval((function(){if(e.expiresIn-=1,e.expiresIn>0){var t=Object.assign(e.$store.state.cacheThirdObj||{});t.expiresIn=e.expiresIn,t._acceptTime=(new Date).getTime(),e.$store.commit("setCacheThirdObj",t)}else{var n=Object.assign(e.$store.state.cacheThirdObj||{});n.expiresIn=0,e.$store.commit("setCacheThirdObj",n),e.stopCountDown()}}),1e3)},stopCountDown:function(){this.count&&clearInterval(this.count)},getToken:function(){var e=this.$store.state.cacheThirdObj||{},t={url:"".concat(Q.BaseUrl).concat(Q.proxyGetTpken.path),method:"".concat(Q.proxyGetTpken.method),bodyParams:{clientId:e.clientId,clientSecret:e.clientSecret,code:e.code,tokenUrl:e.tokenEndpoint,scope:e.scope}};this.requestToken(t)},doRefreshToken:function(){var e=this.$store.state.cacheThirdObj||{},t={url:"".concat(Q.BaseUrl).concat(Q.proxyRefreshToken.path),method:"".concat(Q.proxyRefreshToken.method),bodyParams:{clientId:e.clientId,clientSecret:e.clientSecret,refreshToken:e.refreshToken,tokenUrl:e.refreshTokenEndpoint}};this.requestToken(t)},requestToken:function(e){var t=this;e.bodyParams=JSON.stringify(e.bodyParams),H(e,(function(e,n){e?Ce()({message:e.message,type:"error"}):n.json().then((function(e){var n={},a="",s="";for(var o in e)if("resultData"===o)if(s=e[o],s.indexOf("error")>=0)n={};else try{var r=JSON.parse(e[o]);t.accessToken=r.accessToken,t.refreshToken=r.refreshToken,t.expiresIn=r.expiresIn,r._acceptTime=(new Date).getTime(),n=r,t.countDown()}catch(c){n={}}else a+=a?"\n"+"".concat(o,": ").concat(e[o]):"".concat(o,": ").concat(e[o]);var i=t.$store.state.cacheThirdObj||{};i=Object.assign(i,n),t.requestInfo=a,t.responseInfo=s,i.responseInfo=Object.assign(t.responseInfo),i.requestInfo=Object.assign(t.requestInfo),t.$store.commit("setCacheThirdObj",i)}))}))}}},Pe=we,Oe=(n("d1c2"),Object(b["a"])(Pe,ge,xe,!1,null,"c10362ce",null)),Se=Oe.exports,je={name:"GetToken",components:{DefaultGetToken:_e,ThirdGetToken:Se}},qe=je,Ae=Object(b["a"])(qe,fe,me,!1,null,null,null),Ee=Ae.exports,Be=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container-wrapper"},[e.$store.state.useSystemAuth?n("DefaultGetApi"):n("ThirdGetApi")],1)},$e=[],Re=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container-wrapper"},[e.hasNoVendor?n("Alert",{attrs:{title:e.infoTitle,type:"info",closable:!1,"show-icon":""}}):e._e(),n("div",{staticClass:"api-wrapper"},[n("div",{staticClass:"api-item"},[n("span",{staticClass:"input-label"},[e._v("选择API")]),n("Select",{attrs:{"value-key":"id",filterable:"",clearable:"",placeholder:"请选择"},model:{value:e.selectedApi,callback:function(t){e.selectedApi=t},expression:"selectedApi"}},e._l(e.apiList,(function(e){return n("Option",{key:e.id,attrs:{label:e.interfaceName,value:e}})})),1)],1),e.selectedApi&&e.selectedApi.interfaceDesc?n("Alert",{staticClass:"alert-info",attrs:{title:e.selectedApi.interfaceDesc,type:"success",closable:!1}}):e._e(),n("div",{staticClass:"api-item"},[n("span",{staticClass:"input-label"},[e._v("请求方法:")]),n("Select",{model:{value:e.requestInfo.method,callback:function(t){e.$set(e.requestInfo,"method",t)},expression:"requestInfo.method"}},e._l(e.methodList,(function(e){return n("Option",{key:e.method,attrs:{label:e.name,value:e.method}})})),1)],1),n("div",{staticClass:"api-item"},[n("span",{staticClass:"input-label"},[e._v("请求地址:")]),n("Input",{staticClass:"input-item",attrs:{placeholder:"请求地址"},model:{value:e.requestInfo.url,callback:function(t){e.$set(e.requestInfo,"url",t)},expression:"requestInfo.url"}})],1),n("div",{staticClass:"api-item"},[n("span",{staticClass:"input-label"},[e._v("设置请求头:")]),n("Button",{on:{click:e.addHeader}},[e._v("增加请求头参数")])],1),e._l(e.headers,(function(t,a){return n("div",{key:a,staticClass:"api-item"},[n("Input",{staticClass:"input-header-key",attrs:{placeholder:"key"},model:{value:t.key,callback:function(n){e.$set(t,"key",n)},expression:"item.key"}}),n("span",{staticClass:"input-header-split"},[e._v(":")]),n("Input",{staticClass:"input-header-value",attrs:{placeholder:"value"},model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"item.value"}}),n("Button",{attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(t){return e.removeHeaderItem(a)}}})],1)})),e.showBodyParams?n("div",[n("div",{staticClass:"api-item"},[n("span",{staticClass:"input-label"},[e._v("ContentType:")]),n("Select",{staticClass:"content-type-select",model:{value:e.contentType,callback:function(t){e.contentType=t},expression:"contentType"}},e._l(e.contentTypeList,(function(e){return n("Option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1),"multipart/form-data"===e.contentType||"application/x-www-form-urlencoded"===e.contentType?n("Button",{on:{click:e.addBodyParams}},[e._v("增加Body参数")]):e._e()],1),"application/json"===e.contentType?n("div",{staticClass:"api-item"},[n("div",{attrs:{id:"json-editor"}})]):"multipart/form-data"===e.contentType||"application/x-www-form-urlencoded"===e.contentType?n("div",e._l(e.bodyParams,(function(t,a){return n("div",{key:a,staticClass:"api-item"},[n("Input",{staticClass:"input-header-key",attrs:{placeholder:"key"},model:{value:t.key,callback:function(n){e.$set(t,"key",n)},expression:"item.key"}}),n("span",{staticClass:"input-header-split"},[e._v(":")]),"file"==t.type?n("label",{staticClass:"file-label"},[e._v(e._s(t.value&&t.value.name?"已选: "+t.value.name:"选择文件")+" "),n("input",{staticClass:"input-file",attrs:{type:"file"},on:{change:function(t){e.handleChangeFile(t,a)}}})]):n("Input",{staticClass:"input-header-value",attrs:{placeholder:"value"},model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"item.value"}}),"multipart/form-data"===e.contentType?n("Select",{staticClass:"form-data-select",attrs:{value:t.type},on:{change:function(t){e.handleTypeChange(t,a)}}},[n("Option",{attrs:{label:"Text",value:"text"}}),n("Option",{attrs:{label:"File",value:"file"}})],1):e._e(),n("Button",{attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(t){return e.removeBodyParams(a)}}})],1)})),0):"text/plain"===e.contentType?n("div",[n("Input",{staticClass:"input-item",attrs:{type:"textarea",autosize:{minRows:3}},model:{value:e.textBodyParams,callback:function(t){e.textBodyParams=t},expression:"textBodyParams"}})],1):e._e()]):e._e(),n("div",{staticClass:"api-item"},[n("Button",{attrs:{type:"primary",disabled:e.disableRequest},on:{click:e.doSendRequest}},[e._v("发送请求")])],1),e.requestInfoDetail?n("div",{staticClass:"info-area"},[n("Card",{attrs:{shadow:"never"}},[n("div",{staticClass:"header-info",attrs:{slot:"header"},slot:"header"},[e._v("请求信息")]),n("pre",{staticClass:"pre-item"},[e._v(e._s(e.requestInfoDetail))])])],1):e._e(),e.responseInfo?n("div",{staticClass:"info-area"},[n("Card",{attrs:{shadow:"never"}},[n("div",{staticClass:"header-info",attrs:{slot:"header"},slot:"header"},[e._v("响应信息")]),n("pre",{staticClass:"pre-item"},[e._v(e._s(e.responseInfo))]),e.attachmentFileUrl?n("a",{attrs:{href:e.attachmentFileUrl,download:e.attachmentFileName}},[e._v(e._s(e.attachmentFileName))]):e._e()])],1):e._e()],2)],1)},De=[],Ue=(n("a4d3"),n("e01a"),n("d28b"),n("3ca3"),n("159b"),n("ddb0"),n("2b3d"),n("6611"),n("e772")),Ne=n.n(Ue),Le=(n("1f1a"),n("4e4b")),Fe=n.n(Le),ze={name:"DefaultGetApi",components:{Alert:ae.a,Select:Fe.a,Option:Ne.a,Button:L.a,Input:oe.a,Card:U.a},data:function(){return{hasNoVendor:!0,showBodyParams:!1,isSendRequest:!1,responseInfo:"",requestInfoDetail:"",attachmentFileUrl:"",attachmentFileName:"",infoTitle:"",selectedApi:"",apiList:[],methodList:[{name:"GET",method:"GET"},{name:"POST",method:"POST"},{name:"PUT",method:"PUT"},{name:"DELETE",method:"DELETE"},{name:"PATCH",method:"PATCH"}],requestInfo:{method:"",url:""},headers:[],contentType:"",contentTypeList:[{name:"application/json",value:"application/json"},{name:"multipart/form-data",value:"multipart/form-data"},{name:"application/x-www-form-urlencoded",value:"application/x-www-form-urlencoded"},{name:"text/plain",value:"text/plain"}],bodyParams:[],textBodyParams:"",accessToken:"",serviceId:"",jsonEditor:null}},watch:{selectedApi:function(e){e&&(this.requestInfo.url=e.interfaceUrl,this.requestInfo.method=(e.httpMethod||"GET").toUpperCase())},"requestInfo.method":function(e){!e||"PUT"!==e&&"POST"!==e&&"PATCH"!==e?(this.showBodyParams=!1,this.contentType=""):(this.showBodyParams=!0,this.contentType="application/json")},contentType:function(e){var t=this;if(e)"application/json"===e&&this.showBodyParams?this.$nextTick((function(){t.initJsonEditor()})):this.bodyParams=[];else{var n=document.getElementById("json-editor");n&&n.parentNode.remove(n),this.jsonEditor=null,this.bodyParams=[]}}},computed:{disableRequest:function(){return!this.requestInfo.url||!this.requestInfo.method}},created:function(){this.initData()},methods:{initData:function(){var e=this.$store.state.selectedArr||[],t=this.$store.state.cacheTokenObj||{},n=t.accessToken;e.length<2?(this.hasNoVendor=!0,this.infoTitle="请先获取对应的资源服务商授权"):n?(this.hasNoVendor=!1,this.infoTitle="",this.accessToken=n,this.serviceId=e[1],this.getApiList()):(this.hasNoVendor=!0,this.infoTitle="请先获取授权token")},getApiList:function(){var e=this,t={url:"".concat(Q.BaseUrl,"/front/api/resList/").concat(this.serviceId),method:"get"};H(t,(function(t,n){t?Ce()({message:t.message,type:"error"}):n.json().then((function(t){if("success"===t.status){var n=t.data||[];e.apiList=n}else Ce()({message:t.message,type:"error"})}))}))},addHeader:function(){this.headers.splice(this.headers.length,1,{key:"",value:""})},removeHeaderItem:function(e){this.headers.splice(e,1)},addBodyParams:function(){"multipart/form-data"!==this.contentType&&"application/x-www-form-urlencoded"!==this.contentType||this.bodyParams.splice(this.bodyParams.length,1,{key:"",value:"",type:"text"})},removeBodyParams:function(e){this.bodyParams.splice(e,1)},handleChangeFile:function(e,t){var n=e.target.files[0],a=this.bodyParams[t];a.value=n,this.bodyParams.splice(t,1,a)},handleTypeChange:function(e,t){var n={key:"",value:"",type:e};this.bodyParams.splice(t,1,n)},initJsonEditor:function(){var e=document.getElementById("json-editor");e&&(this.jsonEditor=CodeMirror(e,{value:"{}",mode:"application/json"}))},doSendRequest:function(){if(this.isSendRequest)return!1;if(this.hasNoVendor)return Ce()({message:this.infoTitle,type:"error"}),!1;if(!this.requestInfo.url)return Ce()({message:"请先选择API",type:"error"}),!1;var e={url:this.requestInfo.url,method:this.requestInfo.method,queryParams:{access_token:this.accessToken},headers:{}},t=!0,n=!1,a=void 0;try{for(var s,o=this.headers[Symbol.iterator]();!(t=(s=o.next()).done);t=!0){var r=s.value;e.headers=e.headers||{},r.key&&r.value&&(e.headers[r.key]=r.value)}}catch(c){n=!0,a=c}finally{try{t||null==o.return||o.return()}finally{if(n)throw a}}if("POST"===e.method||"PUT"===e.method||"PATCH"===e.method){var i=this.generateBodyParams();if(i.errorMsg)return Ce()({message:i.errorMsg,type:"error"}),!1;i.bodyParams&&(e.bodyParams=i.bodyParams,e.headers["content-type"]=this.contentType)}this.sendFetchRequest(e)},generateRequestInfo:function(e){var t="";if(t+="method: ".concat(e.method,"\n"),t+="url: ".concat(e.url),e.headers)for(var n in e.headers)e.headers[n]&&(t+="".concat(n,": ").concat(e.headers[n]));return t},sendFetchRequest:function(e){var t=this;this.isSendRequest=!0,this.responseInfo="",this.attachmentFileName="",this.attachmentFileUrl="",this.requestInfoDetail="",H(e,(function(n,a){if(n)Ce()({message:n.message,type:"error"});else{t.requestInfoDetail=t.generateRequestInfo(e);var s=a.headers.get("Content-Disposition")||"",o=a.headers.get("Content-Type")||"application/json";a.headers.forEach((function(e,n){t.responseInfo+="".concat(n," : ").concat(e," \n")})),t.responseInfo+="\n\nResponseBody:\n",s.indexOf("attachment")>=0?(s.indexOf("filename")>=0?t.attachmentFileName=s.replace(/(.*filename=)|"/g,""):t.attachmentFileName="附件",a.blob().then((function(e){t.attachmentFileUrl=window.URL.createObjectURL(new Blob([e]))}))):o.indexOf("application/json")>=0?a.json().then((function(e){t.responseInfo+=JSON.stringify(e)+"\n"})):o.indexOf("text/")>=0?a.text().then((function(e){t.responseInfo+=e+"\n"})):t.responseInfo+="unknow response content type"}t.isSendRequest=!1}))},generateBodyParams:function(){var e=!1,t=null;if("application/json"===this.contentType){var n=this.jsonEditor.getValue();if(n)try{JSON.parse(n),t=n}catch(C){e="无效的JSON输入"}}else if("multipart/form-data"===this.contentType){var a=0,s=new FormData,o=!0,r=!1,i=void 0;try{for(var c,l=this.bodyParams[Symbol.iterator]();!(o=(c=l.next()).done);o=!0){var d=c.value;d.key&&d.value&&(s.append(d.key,d.value),a+=1)}}catch(b){r=!0,i=b}finally{try{o||null==l.return||l.return()}finally{if(r)throw i}}a>0&&(t=s)}else if("application/x-www-form-urlencoded"===this.contentType){var u=[],h=!0,p=!1,f=void 0;try{for(var m,v=this.bodyParams[Symbol.iterator]();!(h=(m=v.next()).done);h=!0){var y=m.value;if(y.key&&y.value){var T=encodeURIComponent(y.key)+"="+encodeURIComponent(y.value);u.push(T)}}}catch(b){p=!0,f=b}finally{try{h||null==v.return||v.return()}finally{if(p)throw f}}u.length>0&&(t=u.join("&"))}else"text/plain"===this.contentType&&this.textBodyParams&&(t=this.textBodyParams);return{errorMsg:e,bodyParams:t}}}},Ge=ze,Me=(n("9781"),Object(b["a"])(Ge,Re,De,!1,null,"5355629c",null)),Je=Me.exports,He=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container-wrapper"},[e.hasNoVendor?n("Alert",{attrs:{title:e.infoTitle,type:"info",closable:!1,"show-icon":""}}):e._e(),n("div",{staticClass:"api-wrapper"},[n("div",{staticClass:"api-item"},[n("span",{staticClass:"input-label"},[e._v("请求地址:")]),n("Input",{staticClass:"input-item",attrs:{placeholder:"请求地址"},model:{value:e.requestInfo.url,callback:function(t){e.$set(e.requestInfo,"url","string"===typeof t?t.trim():t)},expression:"requestInfo.url"}})],1),n("div",{staticClass:"api-item"},[n("span",{staticClass:"input-label"},[e._v("请求方法:")]),n("Select",{model:{value:e.requestInfo.method,callback:function(t){e.$set(e.requestInfo,"method",t)},expression:"requestInfo.method"}},e._l(e.methodList,(function(e){return n("Option",{key:e.method,attrs:{label:e.name,value:e.method}})})),1)],1),n("div",{staticClass:"api-item"},[n("span",{staticClass:"input-label"},[e._v("设置请求头:")]),n("Button",{on:{click:e.addHeader}},[e._v("增加请求头参数")])],1),e._l(e.headers,(function(t,a){return n("div",{key:a,staticClass:"api-item"},[n("Input",{staticClass:"input-header-key",attrs:{placeholder:"key"},model:{value:t.key,callback:function(n){e.$set(t,"key",n)},expression:"item.key"}}),n("span",{staticClass:"input-header-split"},[e._v(":")]),n("Input",{staticClass:"input-header-value",attrs:{placeholder:"value"},model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"item.value"}}),n("Button",{attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(t){return e.removeHeaderItem(a)}}})],1)})),e.showBodyParams?n("div",[n("div",{staticClass:"api-item"},[n("span",{staticClass:"input-label"},[e._v("ContentType:")]),n("Select",{staticClass:"content-type-select",model:{value:e.contentType,callback:function(t){e.contentType=t},expression:"contentType"}},e._l(e.contentTypeList,(function(e){return n("Option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1),"multipart/form-data"===e.contentType||"application/x-www-form-urlencoded"===e.contentType?n("Button",{on:{click:e.addBodyParams}},[e._v("增加Body参数")]):e._e()],1),"application/json"===e.contentType?n("div",{staticClass:"api-item"},[n("div",{attrs:{id:"json-editor"}})]):"multipart/form-data"===e.contentType||"application/x-www-form-urlencoded"===e.contentType?n("div",e._l(e.bodyParams,(function(t,a){return n("div",{key:a,staticClass:"api-item"},[n("Input",{staticClass:"input-header-key",attrs:{placeholder:"key"},model:{value:t.key,callback:function(n){e.$set(t,"key",n)},expression:"item.key"}}),n("span",{staticClass:"input-header-split"},[e._v(":")]),"file"==t.type?n("label",{staticClass:"file-label"},[e._v(e._s(t.value&&t.value.name?"已选: "+t.value.name:"选择文件")+" "),n("input",{staticClass:"input-file",attrs:{type:"file"},on:{change:function(t){e.handleChangeFile(t,a)}}})]):n("Input",{staticClass:"input-header-value",attrs:{placeholder:"value"},model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"item.value"}}),"multipart/form-data"===e.contentType?n("Select",{staticClass:"form-data-select",attrs:{value:t.type},on:{change:function(t){e.handleTypeChange(t,a)}}},[n("Option",{attrs:{label:"Text",value:"text"}}),n("Option",{attrs:{label:"File",value:"file"}})],1):e._e(),n("Button",{attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(t){return e.removeBodyParams(a)}}})],1)})),0):"text/plain"===e.contentType?n("div",[n("Input",{staticClass:"input-item",attrs:{type:"textarea",autosize:{minRows:3}},model:{value:e.textBodyParams,callback:function(t){e.textBodyParams=t},expression:"textBodyParams"}})],1):e._e()]):e._e(),n("div",{staticClass:"api-item"},[n("Button",{attrs:{type:"primary",disabled:e.disableRequest},on:{click:e.doSendRequest}},[e._v("发送请求")])],1),e.requestInfoDetail?n("div",{staticClass:"info-area"},[n("Card",{attrs:{shadow:"never"}},[n("div",{staticClass:"header-info",attrs:{slot:"header"},slot:"header"},[e._v("请求信息")]),n("pre",{staticClass:"pre-item"},[e._v(e._s(e.requestInfoDetail))])])],1):e._e(),e.responseInfo?n("div",{staticClass:"info-area"},[n("Card",{attrs:{shadow:"never"}},[n("div",{staticClass:"header-info",attrs:{slot:"header"},slot:"header"},[e._v("响应信息")]),n("pre",{staticClass:"pre-item"},[e._v(e._s(e.responseInfo))]),e.attachmentFileUrl?n("a",{attrs:{href:e.attachmentFileUrl,download:e.attachmentFileName}},[e._v(e._s(e.attachmentFileName))]):e._e()])],1):e._e()],2)],1)},Ve=[],Ke={name:"ThirdGetApi",components:{Alert:ae.a,Select:Fe.a,Option:Ne.a,Button:L.a,Input:oe.a,Card:U.a},data:function(){return{hasNoVendor:!0,showBodyParams:!1,isSendRequest:!1,responseInfo:"",requestInfoDetail:"",attachmentFileUrl:"",attachmentFileName:"",infoTitle:"",methodList:[{name:"GET",method:"GET"},{name:"POST",method:"POST"},{name:"PUT",method:"PUT"},{name:"DELETE",method:"DELETE"},{name:"PATCH",method:"PATCH"}],requestInfo:{method:"",url:""},headers:[],contentType:"",contentTypeList:[{name:"application/json",value:"application/json"},{name:"multipart/form-data",value:"multipart/form-data"},{name:"application/x-www-form-urlencoded",value:"application/x-www-form-urlencoded"},{name:"text/plain",value:"text/plain"}],bodyParams:[],textBodyParams:"",accessToken:"",jsonEditor:null}},watch:{"requestInfo.method":function(e){!e||"PUT"!==e&&"POST"!==e&&"PATCH"!==e?(this.showBodyParams=!1,this.contentType=""):(this.showBodyParams=!0,this.contentType="application/json")},contentType:function(e){var t=this;if(e)"application/json"===e&&this.showBodyParams?this.$nextTick((function(){t.initJsonEditor()})):this.bodyParams=[];else{var n=document.getElementById("json-editor");n&&n.parentNode.remove(n),this.jsonEditor=null,this.bodyParams=[]}}},computed:{disableRequest:function(){return!this.requestInfo.url||!this.requestInfo.method}},created:function(){this.initData()},methods:{initData:function(){var e=this.$store.state.cacheThirdObj||{},t=e.accessToken;t?(this.hasNoVendor=!1,this.infoTitle="",this.accessToken=t):(this.hasNoVendor=!0,this.infoTitle="请先获取授权token"),this.requestInfo=JSON.parse(sessionStorage.getItem("__requestInfo"))||{},this.headers=JSON.parse(sessionStorage.getItem("__headers"))||[],this.contentType=JSON.parse(sessionStorage.getItem("__contentType"))||"",this.bodyParams=JSON.parse(sessionStorage.getItem("__bodyParams"))||[],this.textBodyParams=JSON.parse(sessionStorage.getItem("__textBodyParams"))||"",this.showBodyParams=JSON.parse(sessionStorage.getItem("__showBodyParams"))||!1},addHeader:function(){this.headers.splice(this.headers.length,1,{key:"",value:""})},removeHeaderItem:function(e){this.headers.splice(e,1)},addBodyParams:function(){"multipart/form-data"!==this.contentType&&"application/x-www-form-urlencoded"!==this.contentType||this.bodyParams.splice(this.bodyParams.length,1,{key:"",value:"",type:"text"})},removeBodyParams:function(e){this.bodyParams.splice(e,1)},handleChangeFile:function(e,t){var n=e.target.files[0],a=this.bodyParams[t];a.value=n,this.bodyParams.splice(t,1,a)},handleTypeChange:function(e,t){var n={key:"",value:"",type:e};this.bodyParams.splice(t,1,n)},initJsonEditor:function(){var e=document.getElementById("json-editor");e&&(this.jsonEditor=CodeMirror(e,{value:"{}",mode:"application/json"}))},doSendRequest:function(){if(this.isSendRequest)return!1;if(this.hasNoVendor)return Ce()({message:this.infoTitle,type:"error",showClose:!0}),!1;if(!this.requestInfo.url)return Ce()({message:"请设置请求地址",type:"error",showClose:!0}),!1;if(!this.requestInfo.url)return Ce()({message:"请选择请求方法",type:"error",showClose:!0}),!1;var e={url:"".concat(Q.BaseUrl).concat(Q.proxyGetRes.path),method:"".concat(Q.proxyGetRes.method),queryParams:{url:this.requestInfo.url,method:this.requestInfo.method},headers:{}},t=!0,n=!1,a=void 0;try{for(var s,o=this.headers[Symbol.iterator]();!(t=(s=o.next()).done);t=!0){var r=s.value;e.headers=e.headers||{},r.key&&r.value&&(e.headers["x-access-".concat(r.key)]=r.value)}}catch(c){n=!0,a=c}finally{try{t||null==o.return||o.return()}finally{if(n)throw a}}if("POST"===e.method||"PUT"===e.method||"PATCH"===e.method){var i=this.generateBodyParams();if(i.errorMsg)return Ce()({message:i.errorMsg,type:"error"}),!1;i.bodyParams?(e.bodyParams=i.bodyParams,e.queryParams.contentType=this.contentType):(e.bodyParams=JSON.stringify({}),e.queryParams.contentType=this.contentType||"application/json"),"multipart/form-data"===this.contentType&&(e.url="".concat(Q.BaseUrl).concat(Q.proxyFormData.path))}this.sendFetchRequest(e)},sendFetchRequest:function(e){var t=this;this.isSendRequest=!0,this.responseInfo="",this.attachmentFileName="",this.attachmentFileUrl="",this.requestInfoDetail="",sessionStorage.setItem("__requestInfo",JSON.stringify(this.requestInfo)),sessionStorage.setItem("__headers",JSON.stringify(this.headers)),sessionStorage.setItem("__contentType",JSON.stringify(this.contentType)),sessionStorage.setItem("__bodyParams",JSON.stringify(this.bodyParams)),sessionStorage.setItem("__textBodyParams",JSON.stringify(this.textBodyParams)),sessionStorage.setItem("__showBodyParams",JSON.stringify(this.showBodyParams)),H(e,(function(e,n){if(e)Ce()({message:e.message,type:"error"});else{var a=n.headers.get("Content-Disposition")||"",s=n.headers.get("Content-Type")||"application/json",o="",r="\nResponseBody:\n";a.indexOf("attachment")>=0?(a.indexOf("filename")>=0?t.attachmentFileName=a.replace(/(.*filename=)|"/g,""):t.attachmentFileName="附件",n.blob().then((function(e){t.attachmentFileUrl=window.URL.createObjectURL(new Blob([e]))}))):s.indexOf("application/json")>=0?n.json().then((function(e){for(var n in e)"resultData"===n?r+=JSON.stringify(e.resultData)+"\n":o+=o?"\n"+"".concat(n,": ").concat(e[n]):"".concat(n,": ").concat(e[n]);t.responseInfo=r,t.requestInfoDetail=o})):s.indexOf("text/")>=0?n.text().then((function(e){t.responseInfo+=e+"\n"})):t.responseInfo+="unknow response content type"}t.isSendRequest=!1}))},generateBodyParams:function(){var e=!1,t=null;if("application/json"===this.contentType){var n=this.jsonEditor.getValue();if(n)try{JSON.parse(n),t=n}catch(C){e="无效的JSON输入"}}else if("multipart/form-data"===this.contentType){var a=0,s=new FormData,o=!0,r=!1,i=void 0;try{for(var c,l=this.bodyParams[Symbol.iterator]();!(o=(c=l.next()).done);o=!0){var d=c.value;d.key&&d.value&&(s.append(d.key,d.value),a+=1)}}catch(b){r=!0,i=b}finally{try{o||null==l.return||l.return()}finally{if(r)throw i}}a>0&&(t=s)}else if("application/x-www-form-urlencoded"===this.contentType){var u=[],h=!0,p=!1,f=void 0;try{for(var m,v=this.bodyParams[Symbol.iterator]();!(h=(m=v.next()).done);h=!0){var y=m.value;if(y.key&&y.value){var T=encodeURIComponent(y.key)+"="+encodeURIComponent(y.value);u.push(T)}}}catch(b){p=!0,f=b}finally{try{h||null==v.return||v.return()}finally{if(p)throw f}}u.length>0&&(t=u.join("&"))}else"text/plain"===this.contentType&&this.textBodyParams&&(t=this.textBodyParams);return{errorMsg:e,bodyParams:t}}}},Qe=Ke,We=(n("84d2"),Object(b["a"])(Qe,He,Ve,!1,null,"e6938302",null)),Xe=We.exports,Ye={name:"GetApi",components:{DefaultGetApi:Je,ThirdGetApi:Xe}},Ze=Ye,et=Object(b["a"])(Ze,Be,$e,!1,null,null,null),tt=et.exports,nt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._v("no this page")])},at=[],st={name:"NotFound"},ot=st,rt=Object(b["a"])(ot,nt,at,!1,null,null,null),it=rt.exports,ct=[{path:"/",component:I,children:[{path:"",components:{default:pe,leftMenu:A},name:"playGround"},{path:"index",components:{default:pe,leftMenu:A},name:"index"},{path:"getToken",components:{default:Ee,leftMenu:A},name:"getToken"},{path:"getApi",components:{default:tt,leftMenu:A},name:"getApi"},{path:"*",redirect:{name:"notFound"}}]},{path:"*",component:it,name:"notFound"}],lt=new s["a"]({mode:"history",routes:ct}),dt=lt,ut=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Container",{staticClass:"body-container",attrs:{direction:"vertical"}},[n("Header",{staticClass:"header"},[e._v("SEAC OAuth2.0 Playground")]),n("router-view")],1)},ht=[],pt=(n("a673"),n("7b31")),ft=n.n(pt),mt={name:"App",components:{Container:y.a,Header:ft.a}},vt=mt,yt=(n("faa2"),Object(b["a"])(vt,ut,ht,!1,null,"b615ee90",null)),Tt=yt.exports;a["default"].config.productionTip=!1,a["default"].use(s["a"]),new a["default"]({store:l,router:dt,render:function(e){return e(Tt)}}).$mount("#app")},6289:function(e,t,n){},"70e6":function(e,t,n){},"84d2":function(e,t,n){"use strict";var a=n("9261"),s=n.n(a);s.a},9261:function(e,t,n){},9781:function(e,t,n){"use strict";var a=n("1912"),s=n.n(a);s.a},b422:function(e,t,n){"use strict";var a=n("02a3"),s=n.n(a);s.a},d1c2:function(e,t,n){"use strict";var a=n("17b8"),s=n.n(a);s.a},f57c:function(e,t,n){"use strict";var a=n("6289"),s=n.n(a);s.a},faa2:function(e,t,n){"use strict";var a=n("12c1"),s=n.n(a);s.a},fc01:function(e,t,n){}});